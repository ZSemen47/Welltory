### Перечень тестовых сценариев для функции проверки сна Welltory
#### Предусловие для всех тест-кейсов
1. Скопировать из шаблона или создать в Google Sheets таблицу со следующими заголовками столбцов: begin, end, value, source, где:
   * begin - время начала записи сна
   * end - время конца записи сна
   * value - тип сна (всегда ASLEEP, других типов нет)
   * source - источник данных по сну
1. В настройках доступа в Google Sheets необходимо изменить "Ограниченный доступ" на "Просматривать могут все в Интернете, у кого есть эта ссылка" и указать роль "Читатель". Пример (шаблон) документа с примером данных можно найти [здесь](https://docs.google.com/spreadsheets/d/14pVZX6dGLVaTPDquCNfqyyf8wvNLWkf61w8GiLLc8dc/edit#gid=0).
1. В меню в верхнем левом углу нужно нажать Runtime -> Run all (Среда выполненеия -> Выполнить все) и немного подождать, пока загрузится страница. Внизу появится поле Link, туда нужно будет вставить ссылку на Google Sheets документ, в котором вы подготовили данные. Чтобы перезагрузить данные заново - тоже нужно будет нажать Runtime -> Run all, чтобы снова вставить ссылку и запустить функцию. Потом вы сможете выбрать дату сна и запустить функцию. Результат будет выведен ниже.

#### Тест-кейс №1. Объединение двух записей с разницей менее часа
1. Открыть таблицу в Google Sheets
1. Ввести в столбец begin данные 2020-09-13 23:00:00
1. Ввести в столбец end данные 2020-09-14 3:00:00
1. Ввести в столбец source данные Apple_Health
1. Перейти на следующую строку
1. В столбец begin ввести данные 2020-09-14 3:59:59
1. В столбец end ввести данные 2020-09-14 10:00:00
1. В столбец source ввести данные Apple_Health
1. Открыть страницу с тестовым заданием, в поле "Выбрать дату сна" выбрать дату 2020-09-14
1. Нажать кнопку Get Result
#### Ожидаемый результат:
Выведется результат:
> 2020-09-13 23:00:00	2020-09-14 10:00:00	2020-09-14	Apple_Health

#### Тест-кейс №2. Две записи с разницей в час не объединяются
1. Открыть таблицу в Google Sheets
1. Ввести в столбец begin данные 2020-10-16 1:00:00
1. Ввести в столбец end данные 2020-10-16 2:00:00
1. Ввести в столбец source данные iPhone
1. Перейти на следующую строку
1. В столбец begin ввести данные 2020-10-16 3:00:00
1. В столбец end ввести данные 2020-10-16 8:00:00
1. В столбец source ввести данные iPhone
1. Открыть страницу с тестовым заданием, в поле "Выбрать дату сна" выбрать дату 2020-10-16
1. Нажать кнопку Get Result
#### Ожидаемый результат:
Выведется две записи:
> 2020-10-16 1:00:00 2020-10-16 2:00:00 2020-10-16 iPhone
---
> 2020-10-16 3:00:00 2020-10-16 8:00:00 2020-10-16 iPhone

#### Тест-кейс №3. Две записи с разницей более часа не объединяются
1. Открыть таблицу в Google Sheets
1. Ввести в столбец begin данные 2020-09-15 23:00:00
1. Ввести в столбец end данные 2020-09-16 3:00:00
1. Ввести в столбец source данные Apple_Health
1. Перейти на следующую строку
1. В столбец begin ввести данные 2020-09-16 4:01:00
1. В столбец end ввести данные 2020-09-16 10:00:00
1. В столбец source ввести данные Apple_Health
1. Открыть страницу с тестовым заданием, в поле "Выбрать дату сна" выбрать дату 2020-09-16
1. Нажать кнопку Get Result
#### Ожидаемый результат:
Выведется две записи:
> 2020-09-15 23:00:00 2020-09-16 03:00:00 2020-09-16 Apple_Health
---
> 2020-09-16 04:00:01 2020-09-16 10:00:00 2020-09-16 Apple_Health

#### Тест-кейс №4. Выбираем источник Apple_Health если в предыдущий день был источник Apple_Health
1. Открыть таблицу в Google Sheets
1. Ввести в столбец begin данные 14.10.2020 1:00:00
1. Ввести в столбец end данные 14.10.2020 10:00:00
1. Ввести в столбец source данные Apple_Health
1. Перейти на следующую строку
1. В столбец begin ввести данные 14.10.2020 23:00:00
1. В столбец end ввести данные 15.10.2020 10:00:00
1. В столбец source ввести данные Apple_Health
1. Перейти на следующую строку
1. В столбец begin ввести данные 14.10.2020 23:00:00
1. В столбец end ввести данные 15.10.2020 10:00:00
1. В столбец source ввести данные Beddit
1. Открыть страницу с тестовым заданием, в поле "Выбрать дату сна" выбрать дату 2020-10-15
1. Нажать кнопку Get Result
#### Ожидаемый результат:
> 2020-10-14 23:00:00	2020-10-15 10:00:00	2020-10-15	Apple_Health
#### Тест-кейс №5. Выбираем Apple_Health если 13 дней назад был Apple_Health
1. Открыть таблицу в Google Sheets
1. Ввести в столбец begin данные 01.10.2020 1:00:00
1. Ввести в столбец end данные 01.10.2020 10:00:00
1. Ввести в столбец source данные Apple_Health
1. Перейти на следующую строку
1. В столбец begin ввести данные 13.10.2020 23:00:00
1. В столбец end ввести данные 14.10.2020 10:00:00
1. В столбец source ввести данные Beddit
1. Перейти на следующую строку
1. В столбец begin ввести данные 13.10.2020 23:00:00
1. В столбец end ввести данные 14.10.2020 10:00:00
1. В столбец source ввести данные Apple_Health
1. Открыть страницу с тестовым заданием, в поле "Выбрать дату сна" выбрать дату 2020-10-14
1. Нажать кнопку Get Result
#### Ожидаемый результат:
> 13.10.2020 23:00:00	14.10.2020 10:00:00	2020-10-14	Apple_Health
#### Тест-кейс №6. Выбираем источник Apple_Health если 14 дней назад был источник Apple_Health
1. Открыть таблицу в Google Sheets
1. Ввести в столбец begin данные 01.10.2020 1:00:00
1. Ввести в столбец end данные 01.10.2020 10:00:00
1. Ввести в столбец source данные Apple_Health
1. Перейти на следующую строку
1. В столбец begin ввести данные 14.10.2020 23:00:00
1. В столбец end ввести данные 15.10.2020 10:00:00
1. В столбец source ввести данные Beddit
1. Перейти на следующую строку
1. В столбец begin ввести данные 14.10.2020 23:00:00
1. В столбец end ввести данные 15.10.2020 10:00:00
1. В столбец source ввести данные Apple_Health
1. Открыть страницу с тестовым заданием, в поле "Выбрать дату сна" выбрать дату 2020-10-15
1. Нажать кнопку Get Result
#### Ожидаемый результат:
> 2020-10-14 23:00:00	2020-10-15 10:00:00	2020-10-15	Apple_Health
#### Тест-кейс №7. Выбираем источник Beddit если 15 дней назад был источник Apple_Health
1. Открыть таблицу в Google Sheets
1. Ввести в столбец begin данные 01.10.2020 1:00:00
1. Ввести в столбец end данные 01.10.2020 10:00:00
1. Ввести в столбец source данные Apple_Health
1. Перейти на следующую строку
1. В столбец begin ввести данные 15.10.2020 23:00:00
1. В столбец end ввести данные 16.10.2020 10:00:00
1. В столбец source ввести данные Beddit
1. Перейти на следующую строку
1. В столбец begin ввести данные 15.10.2020 23:00:00
1. В столбец end ввести данные 16.10.2020 10:00:00
1. В столбец source ввести данные Apple_Health
1. Открыть страницу с тестовым заданием, в поле "Выбрать дату сна" выбрать дату 2020-10-16
1. Нажать кнопку Get Result
#### Ожидаемый результат:
В таблицу выбирается Beddit
> 2020-10-15 23:00:00	2020-10-16 10:00:00	2020-10-15	Beddit
#### Тест-кейс №8. Выбираем Apple_Health если у него больше записей, чем у остальных
1. Открыть таблицу в Google Sheets
1. Ввести в столбец begin данные 16.10.2020 1:00:00
1. Ввести в столбец end данные 16.10.2020 2:00:00
1. Ввести в столбец source данные Apple_Health
1. Перейти на следующую строку
1. В столбец begin ввести данные 16.10.2020 2:30:00
1. В столбец end ввести данные 16.10.2020 4:00:00
1. В столбец source ввести данные Apple_Health
1. Перейти на следующую строку
1. В столбец begin ввести данные 16.10.2020 1:00:00
1. В столбец end ввести данные 16.10.2020 7:00:00
1. В столбец source ввести данные Beddit
1. Открыть страницу с тестовым заданием, в поле "Выбрать дату сна" выбрать дату 2020-10-16
1. Нажать кнопку Get Result
#### Ожидаемый результат:
В таблицу выбирается Apple_Health:
> 2020-10-16 01:00:00	2020-10-16 07:00:00	2020-10-16	Apple_Health
#### Тест-кейс №9. Выбираем IPhone если у него больше записей, чем у Apple_Health
1. Открыть таблицу в Google Sheets
1. Ввести в столбец begin данные 16.10.2020 1:00:00
1. Ввести в столбец end данные 16.10.2020 2:00:00
1. Ввести в столбец source данные Apple_Health
1. Перейти на следующую строку
1. В столбец begin ввести данные 16.10.2020 1:00:00
1. В столбец end ввести данные 16.10.2020 2:00:00
1. В столбец source ввести данные iPhone
1. Перейти на следующую строку
1. В столбец begin ввести данные 16.10.2020 2:30:00
1. В столбец end ввести данные 16.10.2020 4:00:00
1. В столбец source ввести данные iPhone
1. Открыть страницу с тестовым заданием, в поле "Выбрать дату сна" выбрать дату 2020-10-16
1. Нажать кнопку Get Result
#### Ожидаемый результат:
В таблицу выбирается iPhone:
> 2020-10-16 01:00:00	2020-10-16 07:00:00	2020-10-16	iPhone
#### Тест-кейс №10. Если у IPhone и Apple_Health одинаково записей выбираем Apple_Health, с учётом того что в предыдущие 14 дней Apple_Health не был выбран
1. Открыть таблицу в Google Sheets
1. Ввести в столбец begin данные 16.10.2020 1:00:00
1. Ввести в столбец end данные 16.10.2020 8:00:00
1. Ввести в столбец source данные Apple_Health
1. Перейти на следующую строку
1. В столбец begin ввести данные 16.10.2020 1:00:00
1. В столбец end ввести данные 16.10.2020 8:00:00
1. В столбец source ввести данные iPhone
1. Открыть страницу с тестовым заданием, в поле "Выбрать дату сна" выбрать дату 2020-10-16
1. Нажать кнопку Get Result
#### Ожидаемый результат:
В таблицу выбирается Apple_Health:
> 2020-10-16 01:00:00	2020-10-16 08:00:00	2020-10-16	Apple_Health
#### Тест-кейс №11. Выбираем IPhone если за сутки пришло больше 17 часов сна от Apple_Health
1. Открыть таблицу в Google Sheets
1. Ввести в столбец begin данные 16.10.2020 1:00:00
1. Ввести в столбец end данные 16.10.2020 18:00:00
1. Ввести в столбец source данные Apple_Health
1. Перейти на следующую строку
1. В столбец begin ввести данные 16.10.2020 1:00:00
1. В столбец end ввести данные 16.10.2020 8:00:00
1. В столбец source ввести данные iPhone
1. Открыть страницу с тестовым заданием, в поле "Выбрать дату сна" выбрать дату 2020-10-16
1. Нажать кнопку Get Result
#### Ожидаемый результат:
В таблицу выбирается iPhone:
> 2020-10-16 01:00:00	2020-10-16 18:00:00	2020-10-16	iPhone
